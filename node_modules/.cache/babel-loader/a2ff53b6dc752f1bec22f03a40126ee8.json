{"ast":null,"code":"var ScrollOut = function () {\n  'use strict';\n\n  function clamp(v, min, max) {\n    return min > v ? min : max < v ? max : v;\n  }\n\n  function sign(x) {\n    return +(x > 0) - +(x < 0);\n  }\n\n  function round(n) {\n    return Math.round(n * 10000) / 10000;\n  }\n\n  var cache = {};\n\n  function replacer(match) {\n    return '-' + match[0].toLowerCase();\n  }\n\n  function hyphenate(value) {\n    return cache[value] || (cache[value] = value.replace(/([A-Z])/g, replacer));\n  }\n  /** find elements */\n\n\n  function $(e, parent) {\n    return !e || e.length === 0 ? // null or empty string returns empty array\n    [] : e.nodeName ? // a single element is wrapped in an array\n    [e] : // selector and NodeList are converted to Element[]\n    [].slice.call(e[0].nodeName ? e : (parent || document.documentElement).querySelectorAll(e));\n  }\n\n  function setAttrs(el, attrs) {\n    // tslint:disable-next-line:forin\n    for (var key in attrs) {\n      if (key.indexOf('_')) {\n        el.setAttribute('data-' + hyphenate(key), attrs[key]);\n      }\n    }\n  }\n\n  function setProps(cssProps) {\n    return function (el, props) {\n      for (var key in props) {\n        if (key.indexOf('_') && (cssProps === true || cssProps[key])) {\n          el.style.setProperty('--' + hyphenate(key), round(props[key]));\n        }\n      }\n    };\n  }\n\n  var clearTask;\n  var subscribers = [];\n\n  function loop() {\n    clearTask = 0;\n    subscribers.slice().forEach(function (s2) {\n      return s2();\n    });\n    enqueue();\n  }\n\n  function enqueue() {\n    if (!clearTask && subscribers.length) {\n      clearTask = requestAnimationFrame(loop);\n    }\n  }\n\n  function subscribe(fn) {\n    subscribers.push(fn);\n    enqueue();\n    return function () {\n      subscribers = subscribers.filter(function (s) {\n        return s !== fn;\n      });\n\n      if (!subscribers.length && clearTask) {\n        cancelAnimationFrame(clearTask);\n        clearTask = 0;\n      }\n    };\n  }\n\n  function unwrap(value, el, ctx, doc) {\n    return typeof value === 'function' ? value(el, ctx, doc) : value;\n  }\n\n  function noop() {}\n  /**\n   * Creates a new instance of ScrollOut that marks elements in the viewport with\n   * an \"in\" class and marks elements outside of the viewport with an \"out\"\n   */\n  // tslint:disable-next-line:no-default-export\n\n\n  function main(opts) {\n    // Apply default options.\n    opts = opts || {}; // Debounce onChange/onHidden/onShown.\n\n    var onChange = opts.onChange || noop;\n    var onHidden = opts.onHidden || noop;\n    var onShown = opts.onShown || noop;\n    var onScroll = opts.onScroll || noop;\n    var props = opts.cssProps ? setProps(opts.cssProps) : noop;\n    var se = opts.scrollingElement;\n    var container = se ? $(se)[0] : window;\n    var doc = se ? $(se)[0] : document.documentElement;\n    var rootChanged = false;\n    var scrollingElementContext = {};\n    var elementContextList = [];\n    var clientOffsetX, clientOffsety;\n    var sub;\n\n    function index() {\n      elementContextList = $(opts.targets || '[data-scroll]', $(opts.scope || doc)[0]).map(function (el) {\n        return {\n          element: el\n        };\n      });\n    }\n\n    function update() {\n      // Calculate position, direction and ratio.\n      var clientWidth = doc.clientWidth;\n      var clientHeight = doc.clientHeight;\n      var scrollDirX = sign(-clientOffsetX + (clientOffsetX = doc.scrollLeft || window.pageXOffset));\n      var scrollDirY = sign(-clientOffsety + (clientOffsety = doc.scrollTop || window.pageYOffset));\n      var scrollPercentX = doc.scrollLeft / (doc.scrollWidth - clientWidth || 1);\n      var scrollPercentY = doc.scrollTop / (doc.scrollHeight - clientHeight || 1); // Detect if the root context has changed.\n\n      rootChanged = rootChanged || scrollingElementContext.scrollDirX !== scrollDirX || scrollingElementContext.scrollDirY !== scrollDirY || scrollingElementContext.scrollPercentX !== scrollPercentX || scrollingElementContext.scrollPercentY !== scrollPercentY;\n      scrollingElementContext.scrollDirX = scrollDirX;\n      scrollingElementContext.scrollDirY = scrollDirY;\n      scrollingElementContext.scrollPercentX = scrollPercentX;\n      scrollingElementContext.scrollPercentY = scrollPercentY;\n      var childChanged = false;\n\n      for (var index_1 = 0; index_1 < elementContextList.length; index_1++) {\n        var ctx = elementContextList[index_1];\n        var element = ctx.element; // find the distance from the element to the scrolling container\n\n        var target = element;\n        var offsetX = 0;\n        var offsetY = 0;\n\n        do {\n          offsetX += target.offsetLeft;\n          offsetY += target.offsetTop;\n          target = target.offsetParent;\n        } while (target && target !== container); // Get element dimensions.\n\n\n        var elementHeight = element.clientHeight || element.offsetHeight || 0;\n        var elementWidth = element.clientWidth || element.offsetWidth || 0; // Find visible ratios for each element.\n\n        var visibleX = (clamp(offsetX + elementWidth, clientOffsetX, clientOffsetX + clientWidth) - clamp(offsetX, clientOffsetX, clientOffsetX + clientWidth)) / elementWidth;\n        var visibleY = (clamp(offsetY + elementHeight, clientOffsety, clientOffsety + clientHeight) - clamp(offsetY, clientOffsety, clientOffsety + clientHeight)) / elementHeight;\n        var intersectX = visibleX === 1 ? 0 : sign(offsetX - clientOffsetX);\n        var intersectY = visibleY === 1 ? 0 : sign(offsetY - clientOffsety);\n        var viewportX = clamp((clientOffsetX - (elementWidth / 2 + offsetX - clientWidth / 2)) / (clientWidth / 2), -1, 1);\n        var viewportY = clamp((clientOffsety - (elementHeight / 2 + offsetY - clientHeight / 2)) / (clientHeight / 2), -1, 1);\n        var visible = void 0;\n\n        if (opts.offset) {\n          visible = unwrap(opts.offset, element, ctx, doc) <= clientOffsety ? 1 : 0;\n        } else if ((unwrap(opts.threshold, element, ctx, doc) || 0) < visibleX * visibleY) {\n          visible = 1;\n        } else {\n          visible = 0;\n        }\n\n        var changedVisible = ctx.visible !== visible;\n        var changed = ctx._changed || changedVisible || ctx.visibleX !== visibleX || ctx.visibleY !== visibleY || ctx.index !== index_1 || ctx.elementHeight !== elementHeight || ctx.elementWidth !== elementWidth || ctx.offsetX !== offsetX || ctx.offsetY !== offsetY || ctx.intersectX !== ctx.intersectX || ctx.intersectY !== ctx.intersectY || ctx.viewportX !== viewportX || ctx.viewportY !== viewportY;\n\n        if (changed) {\n          childChanged = true;\n          ctx._changed = true;\n          ctx._visibleChanged = changedVisible;\n          ctx.visible = visible;\n          ctx.elementHeight = elementHeight;\n          ctx.elementWidth = elementWidth;\n          ctx.index = index_1;\n          ctx.offsetX = offsetX;\n          ctx.offsetY = offsetY;\n          ctx.visibleX = visibleX;\n          ctx.visibleY = visibleY;\n          ctx.intersectX = intersectX;\n          ctx.intersectY = intersectY;\n          ctx.viewportX = viewportX;\n          ctx.viewportY = viewportY;\n          ctx.visible = visible;\n        }\n      }\n\n      if (!sub && (rootChanged || childChanged)) {\n        sub = subscribe(render);\n      }\n    }\n\n    function render() {\n      maybeUnsubscribe(); // Update root attributes if they have changed.\n\n      if (rootChanged) {\n        rootChanged = false;\n        setAttrs(doc, {\n          scrollDirX: scrollingElementContext.scrollDirX,\n          scrollDirY: scrollingElementContext.scrollDirY\n        });\n        props(doc, scrollingElementContext);\n        onScroll(doc, scrollingElementContext, elementContextList);\n      }\n\n      var len = elementContextList.length;\n\n      for (var x = len - 1; x > -1; x--) {\n        var ctx = elementContextList[x];\n        var el = ctx.element;\n        var visible = ctx.visible;\n        var justOnce = el.hasAttribute('scrollout-once') || false; // Once\n\n        if (ctx._changed) {\n          ctx._changed = false;\n          props(el, ctx);\n        }\n\n        if (ctx._visibleChanged) {\n          setAttrs(el, {\n            scroll: visible ? 'in' : 'out'\n          });\n          onChange(el, ctx, doc);\n          (visible ? onShown : onHidden)(el, ctx, doc);\n        } // if this is shown multiple times, keep it in the list\n\n\n        if (visible && (opts.once || justOnce)) {\n          // or if this element just display it once\n          elementContextList.splice(x, 1);\n        }\n      }\n    }\n\n    function maybeUnsubscribe() {\n      if (sub) {\n        sub();\n        sub = undefined;\n      }\n    } // Run initialize index.\n\n\n    index();\n    update();\n    render(); // Collapses sequential updates into a single update.\n\n    var updateTaskId = 0;\n\n    var onUpdate = function onUpdate() {\n      updateTaskId = updateTaskId || setTimeout(function () {\n        updateTaskId = 0;\n        update();\n      }, 0);\n    }; // Hook up document listeners to automatically detect changes.\n\n\n    window.addEventListener('resize', onUpdate);\n    container.addEventListener('scroll', onUpdate);\n    return {\n      index: index,\n      update: update,\n      teardown: function teardown() {\n        maybeUnsubscribe();\n        window.removeEventListener('resize', onUpdate);\n        container.removeEventListener('scroll', onUpdate);\n      }\n    };\n  }\n\n  return main;\n}();","map":{"version":3,"names":["ScrollOut","clamp","v","min","max","sign","x","round","n","Math","cache","replacer","match","toLowerCase","hyphenate","value","replace","$","e","parent","length","nodeName","slice","call","document","documentElement","querySelectorAll","setAttrs","el","attrs","key","indexOf","setAttribute","setProps","cssProps","props","style","setProperty","clearTask","subscribers","loop","forEach","s2","enqueue","requestAnimationFrame","subscribe","fn","push","filter","s","cancelAnimationFrame","unwrap","ctx","doc","noop","main","opts","onChange","onHidden","onShown","onScroll","se","scrollingElement","container","window","rootChanged","scrollingElementContext","elementContextList","clientOffsetX","clientOffsety","sub","index","targets","scope","map","element","update","clientWidth","clientHeight","scrollDirX","scrollLeft","pageXOffset","scrollDirY","scrollTop","pageYOffset","scrollPercentX","scrollWidth","scrollPercentY","scrollHeight","childChanged","index_1","target","offsetX","offsetY","offsetLeft","offsetTop","offsetParent","elementHeight","offsetHeight","elementWidth","offsetWidth","visibleX","visibleY","intersectX","intersectY","viewportX","viewportY","visible","offset","threshold","changedVisible","changed","_changed","_visibleChanged","render","maybeUnsubscribe","len","justOnce","hasAttribute","scroll","once","splice","undefined","updateTaskId","onUpdate","setTimeout","addEventListener","teardown","removeEventListener"],"sources":["/Users/adnanbiber/Documents/mita/mita/app/javascript/custom/scroll-out.js"],"sourcesContent":["var ScrollOut = (function () {\n  'use strict';\n\n  function clamp(v, min, max) {\n      return min > v ? min : max < v ? max : v;\n  }\n  function sign(x) {\n      return (+(x > 0) - +(x < 0));\n  }\n  function round(n) {\n      return Math.round(n * 10000) / 10000;\n  }\n\n  var cache = {};\n  function replacer(match) {\n      return '-' + match[0].toLowerCase();\n  }\n  function hyphenate(value) {\n      return cache[value] || (cache[value] = value.replace(/([A-Z])/g, replacer));\n  }\n\n  /** find elements */\n  function $(e, parent) {\n      return !e || e.length === 0\n          ? // null or empty string returns empty array\n              []\n          : e.nodeName\n              ? // a single element is wrapped in an array\n                  [e]\n              : // selector and NodeList are converted to Element[]\n                  [].slice.call(e[0].nodeName ? e : (parent || document.documentElement).querySelectorAll(e));\n  }\n  function setAttrs(el, attrs) {\n      // tslint:disable-next-line:forin\n      for (var key in attrs) {\n          if (key.indexOf('_')) {\n              el.setAttribute('data-' + hyphenate(key), attrs[key]);\n          }\n      }\n  }\n  function setProps(cssProps) {\n      return function (el, props) {\n          for (var key in props) {\n              if (key.indexOf('_') && (cssProps === true || cssProps[key])) {\n                  el.style.setProperty('--' + hyphenate(key), round(props[key]));\n              }\n          }\n      };\n  }\n\n  var clearTask;\n  var subscribers = [];\n  function loop() {\n      clearTask = 0;\n      subscribers.slice().forEach(function (s2) { return s2(); });\n      enqueue();\n  }\n  function enqueue() {\n      if (!clearTask && subscribers.length) {\n          clearTask = requestAnimationFrame(loop);\n      }\n  }\n  function subscribe(fn) {\n      subscribers.push(fn);\n      enqueue();\n      return function () {\n          subscribers = subscribers.filter(function (s) { return s !== fn; });\n          if (!subscribers.length && clearTask) {\n              cancelAnimationFrame(clearTask);\n              clearTask = 0;\n          }\n      };\n  }\n\n  function unwrap(value, el, ctx, doc) {\n      return typeof value === 'function' ? value(el, ctx, doc) : value;\n  }\n  function noop() { }\n\n  /**\n   * Creates a new instance of ScrollOut that marks elements in the viewport with\n   * an \"in\" class and marks elements outside of the viewport with an \"out\"\n   */\n  // tslint:disable-next-line:no-default-export\n  function main (opts) {\n      // Apply default options.\n      opts = opts || {};\n      // Debounce onChange/onHidden/onShown.\n      var onChange = opts.onChange || noop;\n      var onHidden = opts.onHidden || noop;\n      var onShown = opts.onShown || noop;\n      var onScroll = opts.onScroll || noop;\n      var props = opts.cssProps ? setProps(opts.cssProps) : noop;\n      var se = opts.scrollingElement;\n      var container = se ? $(se)[0] : window;\n      var doc = se ? $(se)[0] : document.documentElement;\n      var rootChanged = false;\n      var scrollingElementContext = {};\n      var elementContextList = [];\n      var clientOffsetX, clientOffsety;\n      var sub;\n      function index() {\n          elementContextList = $(opts.targets || '[data-scroll]', $(opts.scope || doc)[0]).map(function (el) { return ({ element: el }); });\n      }\n      function update() {\n          // Calculate position, direction and ratio.\n          var clientWidth = doc.clientWidth;\n          var clientHeight = doc.clientHeight;\n          var scrollDirX = sign(-clientOffsetX + (clientOffsetX = doc.scrollLeft || window.pageXOffset));\n          var scrollDirY = sign(-clientOffsety + (clientOffsety = doc.scrollTop || window.pageYOffset));\n          var scrollPercentX = doc.scrollLeft / (doc.scrollWidth - clientWidth || 1);\n          var scrollPercentY = doc.scrollTop / (doc.scrollHeight - clientHeight || 1);\n          // Detect if the root context has changed.\n          rootChanged =\n              rootChanged ||\n                  scrollingElementContext.scrollDirX !== scrollDirX ||\n                  scrollingElementContext.scrollDirY !== scrollDirY ||\n                  scrollingElementContext.scrollPercentX !== scrollPercentX ||\n                  scrollingElementContext.scrollPercentY !== scrollPercentY;\n          scrollingElementContext.scrollDirX = scrollDirX;\n          scrollingElementContext.scrollDirY = scrollDirY;\n          scrollingElementContext.scrollPercentX = scrollPercentX;\n          scrollingElementContext.scrollPercentY = scrollPercentY;\n          var childChanged = false;\n          for (var index_1 = 0; index_1 < elementContextList.length; index_1++) {\n              var ctx = elementContextList[index_1];\n              var element = ctx.element;\n              // find the distance from the element to the scrolling container\n              var target = element;\n              var offsetX = 0;\n              var offsetY = 0;\n              do {\n                  offsetX += target.offsetLeft;\n                  offsetY += target.offsetTop;\n                  target = target.offsetParent;\n              } while (target && target !== container);\n              // Get element dimensions.\n              var elementHeight = element.clientHeight || element.offsetHeight || 0;\n              var elementWidth = element.clientWidth || element.offsetWidth || 0;\n              // Find visible ratios for each element.\n              var visibleX = (clamp(offsetX + elementWidth, clientOffsetX, clientOffsetX + clientWidth) -\n                  clamp(offsetX, clientOffsetX, clientOffsetX + clientWidth)) /\n                  elementWidth;\n              var visibleY = (clamp(offsetY + elementHeight, clientOffsety, clientOffsety + clientHeight) -\n                  clamp(offsetY, clientOffsety, clientOffsety + clientHeight)) /\n                  elementHeight;\n              var intersectX = visibleX === 1 ? 0 : sign(offsetX - clientOffsetX);\n              var intersectY = visibleY === 1 ? 0 : sign(offsetY - clientOffsety);\n              var viewportX = clamp((clientOffsetX - (elementWidth / 2 + offsetX - clientWidth / 2)) / (clientWidth / 2), -1, 1);\n              var viewportY = clamp((clientOffsety - (elementHeight / 2 + offsetY - clientHeight / 2)) / (clientHeight / 2), -1, 1);\n              var visible = void 0;\n              if (opts.offset) {\n                  visible = unwrap(opts.offset, element, ctx, doc) <= clientOffsety ? 1 : 0;\n              }\n              else if ((unwrap(opts.threshold, element, ctx, doc) || 0) < visibleX * visibleY) {\n                  visible = 1;\n              }\n              else {\n                  visible = 0;\n              }\n              var changedVisible = ctx.visible !== visible;\n              var changed = ctx._changed ||\n                  changedVisible ||\n                  ctx.visibleX !== visibleX ||\n                  ctx.visibleY !== visibleY ||\n                  ctx.index !== index_1 ||\n                  ctx.elementHeight !== elementHeight ||\n                  ctx.elementWidth !== elementWidth ||\n                  ctx.offsetX !== offsetX ||\n                  ctx.offsetY !== offsetY ||\n                  ctx.intersectX !== ctx.intersectX ||\n                  ctx.intersectY !== ctx.intersectY ||\n                  ctx.viewportX !== viewportX ||\n                  ctx.viewportY !== viewportY;\n              if (changed) {\n                  childChanged = true;\n                  ctx._changed = true;\n                  ctx._visibleChanged = changedVisible;\n                  ctx.visible = visible;\n                  ctx.elementHeight = elementHeight;\n                  ctx.elementWidth = elementWidth;\n                  ctx.index = index_1;\n                  ctx.offsetX = offsetX;\n                  ctx.offsetY = offsetY;\n                  ctx.visibleX = visibleX;\n                  ctx.visibleY = visibleY;\n                  ctx.intersectX = intersectX;\n                  ctx.intersectY = intersectY;\n                  ctx.viewportX = viewportX;\n                  ctx.viewportY = viewportY;\n                  ctx.visible = visible;\n              }\n          }\n          if (!sub && (rootChanged || childChanged)) {\n              sub = subscribe(render);\n          }\n      }\n      function render() {\n          maybeUnsubscribe();\n          // Update root attributes if they have changed.\n          if (rootChanged) {\n              rootChanged = false;\n              setAttrs(doc, {\n                  scrollDirX: scrollingElementContext.scrollDirX,\n                  scrollDirY: scrollingElementContext.scrollDirY\n              });\n              props(doc, scrollingElementContext);\n              onScroll(doc, scrollingElementContext, elementContextList);\n          }\n          var len = elementContextList.length;\n          for (var x = len - 1; x > -1; x--) {\n              var ctx = elementContextList[x];\n              var el = ctx.element;\n              var visible = ctx.visible;\n              var justOnce = el.hasAttribute('scrollout-once') || false; // Once\n              if (ctx._changed) {\n                  ctx._changed = false;\n                  props(el, ctx);\n              }\n              if (ctx._visibleChanged) {\n                  setAttrs(el, { scroll: visible ? 'in' : 'out' });\n                  onChange(el, ctx, doc);\n                  (visible ? onShown : onHidden)(el, ctx, doc);\n              }\n              // if this is shown multiple times, keep it in the list\n              if (visible && (opts.once || justOnce)) { // or if this element just display it once\n                  elementContextList.splice(x, 1);\n              }\n          }\n      }\n      function maybeUnsubscribe() {\n          if (sub) {\n              sub();\n              sub = undefined;\n          }\n      }\n      // Run initialize index.\n      index();\n      update();\n      render();\n      // Collapses sequential updates into a single update.\n      var updateTaskId = 0;\n      var onUpdate = function () {\n          updateTaskId = updateTaskId || setTimeout(function () {\n              updateTaskId = 0;\n              update();\n          }, 0);\n      };\n      // Hook up document listeners to automatically detect changes.\n      window.addEventListener('resize', onUpdate);\n      container.addEventListener('scroll', onUpdate);\n      return {\n          index: index,\n          update: update,\n          teardown: function () {\n              maybeUnsubscribe();\n              window.removeEventListener('resize', onUpdate);\n              container.removeEventListener('scroll', onUpdate);\n          }\n      };\n  }\n\n  return main;\n\n}());\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}